shopping-cart-app/
├── e2e/                                      # End-to-end tests folder (Playwright)
│   └── user-journey.spec.ts                  # E2E test: Complete user journey
│                                             # Tests: Registration → Login → Add to cart → 
│                                             # View cart → Remove items → Logout → Login → 
│                                             # Cart persistence, form validation
│
├── public/                                   # Static assets folder
│   │                                         # Purpose: Contains files that are copied as-is to build output
│   └── favicon.jpg                           # Browser favicon (icon shown in browser tab)
│
├── server/                                   # Backend API server (Node.js/Express)
│   │                                         # This folder contains the REST API that handles:
│   │                                         # - User registration and authentication
│   │                                         # - Product data management
│   │                                         # - Shopping cart operations (per-user)
│   │
│   ├── db.json                               # User database - JSON file containing:
│   │                                         # - Registered users (email, password)
│   │                                         # - Per-user shopping carts with items array
│   ├── package-lock.json                     # Locked dependency versions (auto-generated)
│   ├── package.json                          # Server dependencies (Express, cors, etc.)
│   ├── products.json                         # Product database - JSON file containing:
│   │                                         # - Product id, title, price, image, stock
│   │                                         # - Stock quantities for inventory management
│   └── server.js                             # Main server file - Express server with 6 endpoints:
│                                             # GET  /api/products - Get all products
│                                             # POST /api/register - Register new user
│                                             # POST /api/login - Authenticate user
│                                             # GET  /api/cart - Get user's cart (requires x-user-email header)
│                                             # POST /api/cart - Update user's cart (requires x-user-email header)
│                                             # GET  /api/debug/db - Debug endpoint (view entire db.json)
│
├── src/                                      # Angular frontend application source code
│   ├── app/                                  # Main application folder - all Angular components, services, etc.
│   │   │
│   │   ├── auth/                             # Authentication module - handles user login/registration
│   │   │   ├── login.component.css           # Login component styles
│   │   │   ├── login.component.html          # Login form template (email, password, submit button, error display)
│   │   │   ├── login.component.ts            # Login component - handles user login form
│   │   │   │                                  # Features: email/password input, form validation,
│   │   │   │                                  # error message display, loading states, redirect handling
│   │   │   │                                  # Supports returnUrl query parameter for post-login redirect
│   │   │   ├── register.component.css        # Registration component styles
│   │   │   ├── register.component.html       # Registration form template (email, password, confirm password)
│   │   │   └── register.component.ts         # Registration component - handles new user signup
│   │   │                                      # Features: Full validation (email format, password ≥6 chars,
│   │   │                                      # password must have capital letter, confirm password match),
│   │   │                                      # auto-login after registration, error handling
│   │   │
│   │   ├── guards/                           # Route guards - protect routes from unauthorized access
│   │   │   └── auth.guard.ts                 # Authentication guard
│   │   │                                     # Purpose: Protects all routes under home
│   │   │                                     # Redirects to /login if user is not authenticated
│   │   │                                     # Uses AuthService to check login status
│   │   │                                     # Preserves returnUrl in query params for post-login redirect
│   │   │
│   │   ├── home/                             # Main application area (protected routes)
│   │   │   ├── cart.component.css            # Cart component styles - list layout, responsive design
│   │   │   ├── cart.component.html           # Cart list template - displays cart items as a list
│   │   │   ├── cart.component.ts             # Shopping cart page component - LAZY LOADED
│   │   │   │                                 # Features: Display user's cart items (image, name, price, quantity),
│   │   │   │                                 # Remove button (decreases quantity by 1, removes item if qty=0),
│   │   │   │                                 # Calculate and display total price,
│   │   │   │                                 # Loading and error states, empty cart message
│   │   │   ├── header.component.css          # Header component styles
│   │   │   ├── header.component.html         # Header template (Products link, Cart link, Logout button)
│   │   │   ├── header.component.ts           # Header component - navigation bar
│   │   │   │                                 # Features: Navigation links (Products, Cart),
│   │   │   │                                 # Logout button, router active states
│   │   │   ├── home.component.css            # Home component styles
│   │   │   ├── home.component.html           # Home template (<app-header> + <router-outlet>)
│   │   │   ├── home.component.ts             # Home shell component - main layout wrapper
│   │   │   │                                 # Features: Contains <app-header> and <router-outlet>
│   │   │   │                                 # Acts as a container for products and cart pages
│   │   │   │                                 # Protected by authGuard
│   │   │   ├── products.component.css        # Products component styles - grid layout, responsive cards
│   │   │   ├── products.component.html       # Products grid template - product cards with images
│   │   │   └── products.component.ts         # Products page component - LAZY LOADED
│   │   │                                     # Features: Product grid display with images, titles, prices,
│   │   │                                     # Stock status indicators, Add to cart button,
│   │   │                                     # Out of stock badge and disabled state,
│   │   │                                     # Stock validation (prevents adding more than available),
│   │   │                                     # Error messages for stock issues,
│   │   │                                     # Loading and error states, empty state,
│   │   │                                     # Success/error notifications
│   │   │
│   │   ├── models/                           # TypeScript interfaces and models
│   │   │   └── product.models.ts             # Shared product-related interfaces
│   │   │                                     # Product - interface for product catalog items
│   │   │                                     # CartItem - interface for cart items (with quantity)
│   │   │                                     # Cart - interface for cart structure (items array)
│   │   │                                     # Purpose: Single source of truth for product/cart types
│   │   │
│   │   ├── services/                         # Angular services - shared business logic
│   │   │   ├── auth.service.ts               # Authentication service
│   │   │   │                                 # Methods: register(), login(), logout(), isLoggedIn(),
│   │   │   │                                 # getCurrentUserEmail(), getAuthHeaders()
│   │   │   │                                 # Features: Manages login state with BehaviorSubject,
│   │   │   │                                 # Persists login state in localStorage,
│   │   │   │                                 # Restores session on service initialization,
│   │   │   │                                 # Generates auth headers for cart API calls
│   │   │   ├── cart.service.ts              # Shopping cart service
│   │   │   │                                 # Methods: getCart(), updateCart(), addToCart(), removeFromCart()
│   │   │   │                                 # Features: Manages cart operations with server API,
│   │   │   │                                 # Stock validation before adding to cart,
│   │   │   │                                 # Quantity management (increment/decrement),
│   │   │   │                                 # Automatic authentication checks via headers
│   │   │   └── products.service.ts          # Products service
│   │   │                                     # Methods: getProducts()
│   │   │                                     # Purpose: Fetches product catalog from server API
│   │   │
│   │   ├── app.component.html                # Root template - just contains <router-outlet></router-outlet>
│   │   ├── app.component.ts                  # Root component - main app component
│   │   │                                     # Purpose: Bootstraps the Angular application
│   │   ├── app.config.ts                     # Application configuration
│   │   │                                     # Providers: Router, HttpClient, Zone.js, Error Listeners
│   │   └── app.routes.ts                     # Application routing configuration
│   │                                         # Routes: /login, /register (public)
│   │                                         # Routes: / (protected shell with HomeComponent)
│   │                                         #   - /products (lazy loaded)
│   │                                         #   - /cart (lazy loaded)
│   │                                         # Uses authGuard for protected routes
│   │                                         # Uses lazy loading for products and cart components
│   │                                         # Default redirect: / -> /products
│   │                                         # Catch-all: redirects based on auth status
│   │
│   ├── index.html                            # Main HTML file - entry point
│   ├── main.ts                               # Application entry point - bootstraps Angular app
│   └── styles.css                            # Global stylesheet - application-wide styles
│
├── angular.json                              # Angular CLI configuration
├── package-lock.json                         # Locked dependency versions (auto-generated)
├── package.json                              # Frontend dependencies (Angular, Playwright, etc.)
├── Plan.txt                                  # This file - project structure and development plan
├── playwright.config.ts                      # Playwright test configuration
├── README.md                                 # Project documentation
├── tsconfig.app.json                         # TypeScript configuration for application
├── tsconfig.json                              # TypeScript base configuration
└── tsconfig.spec.json                        # TypeScript configuration for tests


================================================================================
PROJECT ARCHITECTURE
================================================================================

Backend (server/):
- Express.js REST API server
- JSON file-based data storage (db.json, products.json)
- Per-user cart management using email as identifier
- Cart authentication via x-user-email HTTP header

Frontend (src/):
- Angular 20.3 standalone components
- Lazy loading for products and cart components
- Route guards for authentication protection
- Reactive forms for user input
- Services for API communication and state management
- HomeComponent acts as protected shell with header and router-outlet
- Child routes (products, cart) are lazy-loaded within the shell

Key Features Implemented:
1. User Authentication:
   - Registration with full validation (email, password strength, password confirmation)
   - Login with error handling and returnUrl support
   - Persistent login state (localStorage)
   - Route protection with auth guard
   - Session restoration on app initialization

2. Product Catalog:
   - Product grid display with images
   - Stock status indicators (In Stock / Out of Stock)
   - Real-time stock validation
   - Add to cart functionality with stock checks
   - Success/error notifications
   - Loading and error states

3. Shopping Cart:
   - List view of cart items
   - Quantity management (decrease by 1 per remove action)
   - Remove items (decreases quantity by 1, removes when qty=0)
   - Total price calculation
   - Loading and error states
   - Empty cart message
   - Cart persistence across login sessions

4. Code Quality:
   - Comprehensive JSDoc comments throughout
   - Type-safe interfaces
   - Consistent error handling
   - Clean separation of concerns
   - No unused code or imports


================================================================================
API ENDPOINTS (server/server.js)
================================================================================

GET  /api/products          - Returns array of all products
                              Response: [{ id, title, price, image, stock }, ...]

POST /api/register          - Register new user
                              Body: { email, password }
                              Response: { success: true, email } or { error: "..." }

POST /api/login             - Authenticate user
                              Body: { email, password }
                              Response: { success: true, email } or { error: "..." }

GET  /api/cart              - Get user's cart
                              Headers: { 'x-user-email': 'user@example.com' }
                              Response: { items: [{ id, title, price, image, quantity }, ...] }

POST /api/cart              - Update user's cart
                              Headers: { 'x-user-email': 'user@example.com' }
                              Body: { cart: { items: [...] } }
                              Response: { success: true }

GET  /api/debug/db          - Debug endpoint (view entire db.json)
