shopping-cart-app/
â”œâ”€â”€ e2e/                                      # End-to-end tests folder (Playwright)
â”‚   â”œâ”€â”€ cart-persistence.spec.ts              # E2E test: Cart persistence
â”‚   â”‚                                         # Tests: Cart survives page refresh, logout/login,
â”‚   â”‚                                         # navigation between pages
â”‚   â”œâ”€â”€ registration-login-cart.spec.ts       # E2E test: Full user journey
â”‚   â”‚                                         # Tests: Registration â†’ Login â†’ Add to cart â†’ View cart
â”‚   â””â”€â”€ validation.spec.ts                    # E2E test: Form validation
â”‚                                             # Tests: Email validation, password requirements,
â”‚                                             # password confirmation matching, error messages
â”‚
â”œâ”€â”€ public/                                   # Static assets folder
â”‚   â”‚                                         # Purpose: Contains files that are copied as-is to build output
â”‚   â””â”€â”€ favicon.ico                           # Browser favicon (icon shown in browser tab)
â”‚
â”œâ”€â”€ server/                                   # Backend API server (Node.js/Express)
â”‚   â”‚                                         # This folder contains the REST API that handles:
â”‚   â”‚                                         # - User registration and authentication
â”‚   â”‚                                         # - Product data management
â”‚   â”‚                                         # - Shopping cart operations (per-user)
â”‚   â”‚
â”‚   â”œâ”€â”€ db.json                               # User database - JSON file containing:
â”‚   â”‚                                         # - Registered users (email, password)
â”‚   â”‚                                         # - Per-user shopping carts with items array
â”‚   â”œâ”€â”€ package-lock.json                     # Locked dependency versions (auto-generated)
â”‚   â”œâ”€â”€ package.json                          # Server dependencies (Express, cors, etc.)
â”‚   â”œâ”€â”€ products.json                         # Product database - JSON file containing:
â”‚   â”‚                                         # - Product id, title, price, image, stock
â”‚   â”‚                                         # - Stock quantities for inventory management
â”‚   â””â”€â”€ server.js                             # Main server file - Express server with 6 endpoints:
â”‚                                             # GET  /api/products - Get all products
â”‚                                             # POST /api/register - Register new user
â”‚                                             # POST /api/login - Authenticate user
â”‚                                             # GET  /api/cart - Get user's cart (requires x-user-email header)
â”‚                                             # POST /api/cart - Update user's cart (requires x-user-email header)
â”‚                                             # GET  /api/debug/db - Debug endpoint (view entire db.json)
â”‚
â”œâ”€â”€ src/                                      # Angular frontend application source code
â”‚   â”œâ”€â”€ app/                                  # Main application folder - all Angular components, services, etc.
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth/                             # Authentication module - handles user login/registration
â”‚   â”‚   â”‚   â”œâ”€â”€ login.component.css           # Login component styles
â”‚   â”‚   â”‚   â”œâ”€â”€ login.component.html          # Login form template (email, password, submit button, error display)
â”‚   â”‚   â”‚   â”œâ”€â”€ login.component.ts            # Login component - handles user login form
â”‚   â”‚   â”‚   â”‚                                  # Features: email/password input, form validation,
â”‚   â”‚   â”‚   â”‚                                  # error message display, loading states, redirect handling
â”‚   â”‚   â”‚   â”œâ”€â”€ register.component.css        # Registration component styles
â”‚   â”‚   â”‚   â”œâ”€â”€ register.component.html       # Registration form template (email, password, confirm password)
â”‚   â”‚   â”‚   â””â”€â”€ register.component.ts         # Registration component - handles new user signup
â”‚   â”‚   â”‚                                      # Features: Full validation (email format, password â‰¥6 chars,
â”‚   â”‚   â”‚                                      # password must have capital letter, confirm password match),
â”‚   â”‚   â”‚                                      # auto-login after registration, error handling
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ config/                           # Configuration files
â”‚   â”‚   â”‚   â””â”€â”€ api.config.ts                 # Centralized API configuration
â”‚   â”‚   â”‚                                     # Purpose: Single source of truth for API base URL
â”‚   â”‚   â”‚                                     # Eliminates duplication across services
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ guards/                           # Route guards - protect routes from unauthorized access
â”‚   â”‚   â”‚   â””â”€â”€ auth.guard.ts                 # Authentication guard
â”‚   â”‚   â”‚                                     # Purpose: Protects all routes under home
â”‚   â”‚   â”‚                                     # Redirects to /login if user is not authenticated
â”‚   â”‚   â”‚                                     # Uses AuthService to check login status
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ home/                             # Main application area (protected routes)
â”‚   â”‚   â”‚   â”œâ”€â”€ cart.component.css            # Cart component styles - list layout, responsive design
â”‚   â”‚   â”‚   â”œâ”€â”€ cart.component.html           # Cart list template - displays cart items as a list (not cards)
â”‚   â”‚   â”‚   â”œâ”€â”€ cart.component.ts             # Shopping cart page component - LAZY LOADED #2
â”‚   â”‚   â”‚   â”‚                                 # Features: Display user's cart items (image, name, price, quantity),
â”‚   â”‚   â”‚   â”‚                                 # Remove button (decreases quantity by 1, removes item if qty=0),
â”‚   â”‚   â”‚   â”‚                                 # Calculate and display total price,
â”‚   â”‚   â”‚   â”‚                                 # Loading and error states, empty cart message
â”‚   â”‚   â”‚   â”œâ”€â”€ header.component.css          # Header component styles
â”‚   â”‚   â”‚   â”œâ”€â”€ header.component.html         # Header template (Products link, Cart link, Logout button)
â”‚   â”‚   â”‚   â”œâ”€â”€ header.component.ts           # Header component - navigation bar
â”‚   â”‚   â”‚   â”‚                                 # Features: Navigation links (Products, Cart),
â”‚   â”‚   â”‚   â”‚                                 # Logout button, router active states
â”‚   â”‚   â”‚   â”œâ”€â”€ home.component.css            # Home component styles
â”‚   â”‚   â”‚   â”œâ”€â”€ home.component.html           # Home template (<app-header> + <router-outlet>)
â”‚   â”‚   â”‚   â”œâ”€â”€ home.component.ts             # Home shell component - main layout wrapper
â”‚   â”‚   â”‚   â”‚                                 # Features: Contains <app-header> and <router-outlet>
â”‚   â”‚   â”‚   â”‚                                 # Acts as a container for products and cart pages
â”‚   â”‚   â”‚   â”œâ”€â”€ products.component.css        # Products component styles - grid layout, responsive cards
â”‚   â”‚   â”‚   â”œâ”€â”€ products.component.html       # Products grid template - product cards with images
â”‚   â”‚   â”‚   â””â”€â”€ products.component.ts         # Products page component - LAZY LOADED #1
â”‚   â”‚   â”‚                                     # Features: Product grid display with images, titles, prices,
â”‚   â”‚   â”‚                                     # Stock status indicators, Add to cart button,
â”‚   â”‚   â”‚                                     # Out of stock badge and disabled state,
â”‚   â”‚   â”‚                                     # Stock validation (prevents adding more than available),
â”‚   â”‚   â”‚                                     # Error messages for stock issues,
â”‚   â”‚   â”‚                                     # Loading and error states, empty state
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                           # TypeScript interfaces and models
â”‚   â”‚   â”‚   â””â”€â”€ product.models.ts             # Shared product-related interfaces
â”‚   â”‚   â”‚                                     # Product - interface for product catalog items
â”‚   â”‚   â”‚                                     # CartItem - interface for cart items (with quantity)
â”‚   â”‚   â”‚                                     # Cart - interface for cart structure (items array)
â”‚   â”‚   â”‚                                     # Purpose: Single source of truth for product/cart types
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                         # Angular services - shared business logic
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts               # Authentication service
â”‚   â”‚   â”‚   â”‚                                 # Methods: register(), login(), logout(), isLoggedIn(),
â”‚   â”‚   â”‚   â”‚                                 # getCurrentUserEmail(), getAuthHeaders()
â”‚   â”‚   â”‚   â”‚                                 # Features: Manages login state with BehaviorSubject,
â”‚   â”‚   â”‚   â”‚                                 # Persists login state in localStorage,
â”‚   â”‚   â”‚   â”‚                                 # Provides observables for reactive login state,
â”‚   â”‚   â”‚   â”‚                                 # Generates auth headers for cart API calls
â”‚   â”‚   â”‚   â”œâ”€â”€ cart.service.ts               # Shopping cart service
â”‚   â”‚   â”‚   â”‚                                 # Methods: getCart(), updateCart(), addToCart(), removeFromCart()
â”‚   â”‚   â”‚   â”‚                                 # Features: Manages cart operations with server API,
â”‚   â”‚   â”‚   â”‚                                 # Stock validation before adding to cart,
â”‚   â”‚   â”‚   â”‚                                 # Quantity management (increment/decrement),
â”‚   â”‚   â”‚   â”‚                                 # Automatic authentication checks
â”‚   â”‚   â”‚   â””â”€â”€ products.service.ts           # Products service
â”‚   â”‚   â”‚                                     # Methods: getProducts()
â”‚   â”‚   â”‚                                     # Purpose: Fetches product catalog from server API
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                            # Utility functions - shared helper code
â”‚   â”‚   â”‚   â”œâ”€â”€ error.utils.ts                # Error handling utilities
â”‚   â”‚   â”‚   â”‚                                 # extractErrorMessage() - extracts error messages from various formats
â”‚   â”‚   â”‚   â”‚                                 # normalizeStockError() - normalizes stock-related error messages
â”‚   â”‚   â”‚   â”‚                                 # Purpose: Centralized error handling logic
â”‚   â”‚   â”‚   â””â”€â”€ form.utils.ts                 # Form validation utilities
â”‚   â”‚   â”‚                                     # markFormGroupTouched() - marks all form controls as touched
â”‚   â”‚   â”‚                                     # Purpose: Shared form validation helper used by login/register
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ app.component.html                # Root template - just contains <router-outlet></router-outlet>
â”‚   â”‚   â”œâ”€â”€ app.component.ts                  # Root component - main app component
â”‚   â”‚   â”œâ”€â”€ app.config.ts                     # Application configuration (HttpClient, Router providers)
â”‚   â”‚   â””â”€â”€ app.routes.ts                     # Application routing configuration
â”‚   â”‚                                         # Routes: /login, /register (public)
â”‚   â”‚                                         # Routes: / (protected, lazy loads products), /cart (protected, lazy loaded)
â”‚   â”‚                                         # Uses authGuard for protected routes
â”‚   â”‚                                         # Uses lazy loading for products and cart components
â”‚   â”‚
â”‚   â”œâ”€â”€ index.html                            # Main HTML file - entry point
â”‚   â”œâ”€â”€ main.ts                               # Application entry point - bootstraps Angular app
â”‚   â””â”€â”€ styles.css                            # Global stylesheet - application-wide styles
â”‚
â”œâ”€â”€ angular.json                              # Angular CLI configuration
â”œâ”€â”€ package-lock.json                         # Locked dependency versions (auto-generated)
â”œâ”€â”€ package.json                              # Frontend dependencies (Angular, Playwright, etc.)
â”œâ”€â”€ Plan.txt                                  # This file - project structure and development plan
â”œâ”€â”€ playwright.config.ts                      # Playwright test configuration
â”œâ”€â”€ README.md                                 # Project documentation
â”œâ”€â”€ tsconfig.app.json                         # TypeScript configuration for application
â”œâ”€â”€ tsconfig.json                             # TypeScript base configuration
â””â”€â”€ tsconfig.spec.json                        # TypeScript configuration for tests


================================================================================
PROJECT ARCHITECTURE
================================================================================

Backend (server/):
- Express.js REST API server
- JSON file-based data storage (db.json, products.json)
- Per-user cart management using email as identifier
- Cart authentication via x-user-email HTTP header

Frontend (src/):
- Angular 18+ standalone components
- Lazy loading for products and cart components
- Route guards for authentication protection
- Reactive forms for user input
- Services for API communication and state management
- Shared utilities for error handling and form validation
- Centralized configuration for API endpoints

Key Features Implemented:
1. User Authentication:
   - Registration with full validation (email, password strength, password confirmation)
   - Login with error handling
   - Persistent login state (localStorage)
   - Route protection with auth guard

2. Product Catalog:
   - Product grid display with images
   - Stock status indicators
   - Real-time stock validation
   - Add to cart functionality with stock checks

3. Shopping Cart:
   - List view of cart items (not card-based)
   - Quantity management (increase/decrease)
   - Remove items (decreases quantity by 1, removes when qty=0)
   - Total price calculation
   - Loading and error states

4. Code Quality:
   - DRY principles - no duplicate code
   - Shared utilities for common operations
   - Centralized configuration
   - Type-safe interfaces
   - Consistent error handling


================================================================================
API ENDPOINTS (server/server.js)
================================================================================

GET  /api/products          - Returns array of all products
                              Response: [{ id, title, price, image, stock }, ...]

POST /api/register          - Register new user
                              Body: { email, password }
                              Response: { success: true, email } or { error: "..." }

POST /api/login             - Authenticate user
                              Body: { email, password }
                              Response: { success: true, email } or { error: "..." }

GET  /api/cart              - Get user's cart
                              Headers: { 'x-user-email': 'user@example.com' }
                              Response: { items: [{ id, title, price, image, quantity }, ...] }

POST /api/cart              - Update user's cart
                              Headers: { 'x-user-email': 'user@example.com' }
                              Body: { cart: { items: [...] } }
                              Response: { success: true }

GET  /api/debug/db          - Debug endpoint (view entire db.json)


================================================================================
DEVELOPMENT STATUS
================================================================================

âœ… COMPLETED:
1. Backend server setup (Express, JSON storage, API endpoints)
2. Global styles and project cleanup
3. Routing with lazy loading for products and cart components
4. Authentication service with state management
5. Cart service with stock validation
6. Products service for catalog management
7. Authentication guard for route protection
8. Registration page with full validation
9. Login page with error handling
10. Home shell component with header navigation
11. Products page with grid display, stock validation, add to cart
12. Cart page with list view, quantity management, total calculation
13. Code refactoring - eliminated duplication:
    - Centralized API configuration
    - Shared error handling utilities
    - Shared form validation utilities
    - Simplified service methods
    - Type-safe models/interfaces
14. Stock validation - prevents adding more than available stock
15. Cart quantity management - remove button decreases by 1

ðŸ“‹ REMAINING:
- Playwright E2E tests (if needed for bonus points)
- Final testing and polish (as needed)
